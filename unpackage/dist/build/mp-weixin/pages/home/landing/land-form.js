(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/landing/land-form"],{3984:function(e,r,n){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=a(n("a34a")),u=n("a2e9"),i=n("1334"),s=n("3478");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,r,n,t,u,i,s){try{var a=e[i](s),o=a.value}catch(c){return void n(c)}a.done?r(o):Promise.resolve(o).then(t,u)}function c(e){return function(){var r=this,n=arguments;return new Promise((function(t,u){var i=e.apply(r,n);function s(e){o(i,t,u,s,a,"next",e)}function a(e){o(i,t,u,s,a,"throw",e)}s(void 0)}))}}var d={data:function(){return{rules:{ifOwner:{rules:[{required:!0,errorMessage:"请选择"}]},name:{rules:[{required:!0,errorMessage:"请输入"}]},sex:{rules:[{required:!0,errorMessage:"请选择"}]},idcard:{rules:[{required:!0,errorMessage:"请输入"}]},mobile:{rules:[{required:!0,errorMessage:"请输入"}]},url:{rules:[{required:!0,errorMessage:"请上传"}]},reason:{rules:[{required:!0,errorMessage:"请输入"}]},uptime:{rules:[{required:!0,errorMessage:"请选择"},{validateFunction:function(e,r,n,t){return 19!=r.length&&t("请选择具体时间!"),!0}}]},upport:{rules:[{required:!0,errorMessage:"请输入"}]},upAddress:{rules:[{required:!0,errorMessage:"请选择"}]},upAddressDetail:{rules:[{required:!0,errorMessage:"请输入"}]},downAddress:{rules:[{required:!0,errorMessage:"请选择"}]},downAddressDetail:{rules:[{required:!0,errorMessage:"请输入"}]},trace:{rules:[{required:!0,errorMessage:"请输入"}]},unit:{rules:[{required:!0,errorMessage:"请输入"}]},profession:{rules:[{required:!0,errorMessage:"请输入"}]},ifHealth:{rules:[{required:!0,errorMessage:"请选择"}]}},dataTree:[],landFormData:{ifOwner:"",name:"",sex:"",idcard:"",mobile:"",url:[],reason:"",uptime:"",upport:"",upAddress:"",upAddressDetail:"",downAddress:"",downAddressDetail:"",trace:"",unit:"",profession:"",ifHealth:"",userId:""},owns:[{text:"本人",value:0},{text:"代填",value:1}],report:[{text:"有",value:0},{text:"无",value:1}],sexs:[{text:"男",value:0},{text:"女",value:1}],province:[],city:[],district:[],form_upAddress:[0,0,0],land_address:s.COMMON_ADDRESS,land_downAddress:[0],wechat_userInfo:{}}},onLoad:function(){this.getProvince(),this.wechat_userInfo=(0,u.getStorage)("wechat_userInfo")},methods:{open:function(e){this.$refs[e].open("bottom")},cancel:function(e){this.$refs[e].close()},confirm:function(e){"popup"==e?this.landFormData.upAddress="".concat(this.province[this.form_upAddress[0]].text,"-").concat(this.city[this.form_upAddress[1]].text,"-").concat(this.district[this.form_upAddress[2]].text):"popup-one"==e&&(this.landFormData.downAddress=this.land_address[this.land_downAddress[0]].name),this.cancel(e)},select:function(e){var r=this;return c(t.default.mark((function n(){var u,s;return t.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:u=0;case 1:if(!(u<e.tempFiles.length)){n.next=15;break}return n.prev=2,n.next=5,(0,i.upload)(r.$API.postStorageCreate,e.tempFiles[u].path);case 5:s=n.sent,r.landFormData.url.push({name:e.tempFiles[u].name,extname:e.tempFiles[u].extname,url:s}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),console.log("错误",n.t0);case 12:u++,n.next=1;break;case 15:case"end":return n.stop()}}),n,null,[[2,9]])})))()},deletePic:function(e){var r=this;return c(t.default.mark((function n(){var u,i;return t.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:u=r.landFormData.url,i=r.landFormData.url.findIndex((function(r){return r==e.tempFile})),u.splice(i,1),r.landFormData.url=u;case 4:case"end":return n.stop()}}),n)})))()},submit:function(r){var n=this;this.$refs[r].validate().then(function(){var r=c(t.default.mark((function r(i){var s,a;return t.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=JSON.parse(JSON.stringify(n.landFormData)),s.url=s.url.map((function(e){return e.url})),s.url=s.url.join(","),s.uptime=new Date(s.uptime),s.userId=n.wechat_userInfo.userId,r.next=7,n.$http(n.$API.postHealth,s,"POST");case 7:a=r.sent,0!=a.errno?(0,u.showToast)(a.errmsg):((0,u.showToast)("提交成功!"),(0,u.sendEvent)(n,{isReload:!0}),e.navigateBack());case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){console.log(e),(0,u.showToast)("表单内容皆为必填项！")}))},getProvince:function(){var e=this;return c(t.default.mark((function r(){var n;return t.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,u.getRegionList)();case 3:n=r.sent,e.province=n,e.city=n[0].children,e.district=n[0].children[0].children,r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](0);case 11:case"end":return r.stop()}}),r,null,[[0,9]])})))()},bindChange:function(e){var r=e.detail.value[0],n=e.detail.value[1];this.city=this.province[r].children,this.district=this.province[r].children[n].children,this.form_upAddress=e.detail.value},bindChange2:function(e){this.land_downAddress=e.detail.value}}};r.default=d}).call(this,n("543d")["default"])},"4ac1":function(e,r,n){"use strict";(function(e){n("d0f3");t(n("66fd"));var r=t(n("7344"));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("543d")["createPage"])},"6bc9":function(e,r,n){"use strict";n.r(r);var t=n("3984"),u=n.n(t);for(var i in t)"default"!==i&&function(e){n.d(r,e,(function(){return t[e]}))}(i);r["default"]=u.a},"6e96":function(e,r,n){},7344:function(e,r,n){"use strict";n.r(r);var t=n("ed60"),u=n("6bc9");for(var i in u)"default"!==i&&function(e){n.d(r,e,(function(){return u[e]}))}(i);n("bb85");var s,a=n("f0c5"),o=Object(a["a"])(u["default"],t["b"],t["c"],!1,null,"2817d3b4",null,!1,t["a"],s);r["default"]=o.exports},bb85:function(e,r,n){"use strict";var t=n("6e96"),u=n.n(t);u.a},ed60:function(e,r,n){"use strict";n.d(r,"b",(function(){return u})),n.d(r,"c",(function(){return i})),n.d(r,"a",(function(){return t}));var t={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"6763"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"5399"))},uniDataCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox")]).then(n.bind(null,"1782"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"49d8"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"6d6b"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"75ca"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"6f1e"))}},u=function(){var e=this,r=e.$createElement;e._self._c},i=[]}},[["4ac1","common/runtime","common/vendor"]]]);