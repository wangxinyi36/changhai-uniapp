(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/userInfo"],{70:function(e,n,t){"use strict";(function(e){t(5);r(t(4));var n=r(t(71));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},71:function(e,n,t){"use strict";t.r(n);var r=t(72),a=t(74);for(var u in a)"default"!==u&&function(e){t.d(n,e,(function(){return a[e]}))}(u);t(76);var i,o=t(11),s=Object(o["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"231b239a",null,!1,r["components"],i);s.options.__file="pages/my/userInfo.vue",n["default"]=s.exports},72:function(e,n,t){"use strict";t.r(n);var r=t(73);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},73:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return u})),t.d(n,"components",(function(){return r}));try{r={uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,488))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,495))},uniFilePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(t.bind(null,536))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,n=e.$createElement;e._self._c},u=!1,i=[];a._withStripped=!0},74:function(e,n,t){"use strict";t.r(n);var r=t(75),a=t.n(r);for(var u in r)"default"!==u&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=a.a},75:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t(16)),a=t(15),u=t(21);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n,t,r,a,u,i){try{var o=e[u](i),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var u=e.apply(n,t);function i(e){o(u,r,a,i,s,"next",e)}function s(e){o(u,r,a,i,s,"throw",e)}i(void 0)}))}}var c={data:function(){return{userInfo:{},avatar:{},imageStyles:{width:50,height:50,border:{radius:"50%"}},userForm:{id:"",avatar:"",nickname:""}}},onLoad:function(){this.userInfo=(0,a.getStorage)("wechat_userInfo"),Object.assign(this.userForm,{id:this.userInfo.userId,avatar:this.userInfo.avatarUrl,nickname:this.userInfo.nickName}),this.avatar={name:this.userInfo.nickName,extname:"png",url:this.userInfo.avatarUrl}},methods:{select:function(e){var n=this;return s(r.default.mark((function t(){var a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.upload)(n.$API.postStorageCreate,e.tempFiles[0].path);case 3:a=t.sent,n.avatar={name:e.tempFiles[0].name,extname:e.tempFiles[0].extname,url:a},t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("错误",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},save:function(){var n=this;return s(r.default.mark((function t(){var u,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,u=JSON.parse(JSON.stringify(n.userForm)),u.avatar=n.avatar.url,t.next=5,n.$http(n.$API.postAuthUpdate,u,"POST");case 5:i=t.sent,Object.assign(n.userInfo,{avatarUrl:i.data.avatar,nickName:i.data.nickname}),(0,a.setStorage)("wechat_userInfo",n.userInfo),(0,a.sendEvent)(n,{isReload:!0}),e.showToast({title:"更新成功！",icon:"none",success:function(n){setTimeout((function(){e.navigateBack()}),1500)}}),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}};n.default=c}).call(this,t(1)["default"])},76:function(e,n,t){"use strict";t.r(n);var r=t(77),a=t.n(r);for(var u in r)"default"!==u&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=a.a},77:function(e,n,t){}},[[70,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my/userInfo.js.map