(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesStay/home-stay/home-stay-people"],{389:function(e,t,n){"use strict";(function(e){n(5);r(n(4));var t=r(n(390));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},390:function(e,t,n){"use strict";n.r(t);var r=n(391),a=n(393);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n(395),n(397);var s,c=n(11),i=Object(c["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"214f6d86",null,!1,r["components"],s);i.options.__file="pagesStay/home-stay/home-stay-people.vue",t["default"]=i.exports},391:function(e,t,n){"use strict";n.r(t);var r=n(392);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},392:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return r}));var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.people,(function(t,n){var r=e.__get_orig(t),a="homeStay"==e.from?e.dealCard(t.passengerIdCard):null,o="homeStay"!=e.from?e.__map(e.people,(function(t,n){var r=e.__get_orig(t),a=e.dealCard(t.idCard);return{$orig:r,m1:a}})):null;return{$orig:r,m0:a,l0:o}})));e._isMounted||(e.e0=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,a=r.eventParams||r["event-params"];n=a.index;e.active=n},e.e1=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,a=r.eventParams||r["event-params"];n=a.index;e.active=n}),e.$mp.data=Object.assign({},{$root:{l1:n}})},o=!1,s=[];a._withStripped=!0},393:function(e,t,n){"use strict";n.r(t);var r=n(394),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},394:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(16)),a=n(15);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(u){return void n(u)}c.done?t(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){s(o,r,a,c,i,"next",e)}function i(e){s(o,r,a,c,i,"throw",e)}c(void 0)}))}}var i={data:function(){return{people:[],active:-1,chooseIcon:"/static/icon-choose-no.svg",chooseActiveIcon:"/static/icon-choose-blue.svg",page:1,total:0,userId:"",from:"",goodsId:"",addText:""}},onLoad:function(t){this.userId=(0,a.getStorage)("wechat_userInfo").userId,this.from=t.from,"mallOrder"==this.from&&(e.setNavigationBarTitle({title:"收货地址"}),this.addText="新增收货地址",this.getAddress()),"homeStay"==this.from&&(this.addText="新增住客",this.getList()),this.goodsId=t.goodsId||""},methods:{getList:function(){var e=this;return c(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$data.userId,t.next=4,e.$http("".concat(e.$API.getPassengerList,"?userId=").concat(n));case 4:a=t.sent,e.people=a.data.map((function(e){return e.isActive=!1,e})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},add:function(){var e=this;(0,a.OpenPage)("/pagesStay/home-stay/home-stay-address?from=".concat(this.from)).then((function(t){t.isReload&&(e.page=1,e.people=[],e.total=0,e.getAddress())}))},finish:function(){var t=this.$data,n=t.people,r=t.active;if(-1!==r){var o=this;e.navigateBack({success:function(){var e=o.getOpenerEventChannel();e.emit("getParams",{address:n[r]})}})}else(0,a.showToast)("请选择地址~")},edit:function(e){var t=this;(0,a.OpenPage)("/pagesStay/home-stay/home-stay-address?goodsId=".concat(this.goodsId,"&id=").concat(e,"&from=").concat(this.from)).then((function(e){e.isReload&&(t.page=1,t.people=[],t.total=0,t.getAddress())}))},dealCard:function(e){return(0,a.replaceStar)(e)},getAddress:function(){var e=this;return c(r.default.mark((function t(){var n,a,o,s,c,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.$data,a=n.page,o=n.userId,s=n.total,c=n.people,!(s>0&&s==c.length)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$http("".concat(e.$API.getAddressList,"?limit=10&page=").concat(a,"&userId=").concat(o));case 6:i=t.sent,e.people=e.people.concat(i.data.items),e.total=i.data.total,t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},onReachBottom:function(){this.page++,this.getAddress()}};t.default=i}).call(this,n(1)["default"])},395:function(e,t,n){"use strict";n.r(t);var r=n(396),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var r=n(398),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},398:function(e,t,n){}},[[389,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesStay/home-stay/home-stay-people.js.map